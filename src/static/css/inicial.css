:root{
  /* Paleta viva */
  --ink:#111827;
  --muted:#7b7f91;
  --soft:#f7f7fb;

  --primary:#552789;      /* morado IST base */
  --primary-dk:#3e1a66;

  /* Estados */
  --ok:#16a34a;     /* verde */
  --warn:#f59e0b;   /* ámbar */
  --risk:#dc2626;   /* rojo */
  --info:#3b82f6;   /* azul */

  /* Chips/fondos suaves */
  --chip-bg:#f4f1ff;
  --chip-br:#e7e2ff;

  /* Colores por factor (más colorido) */
  --rep:#dc2626;    --rep-bg:#fee2e2;    /* Repetitivo: rojo */
  --post:#2563eb;   --post-bg:#dbeafe;   /* Postura: azul */
  --lev:#059669;    --lev-bg:#d1fae5;    /* Levantamiento: verde esmeralda */
  --push:#7c3aed;   --push-bg:#ede9fe;   /* Empuje/Arrastre: violeta */
  --pcts:#ea580c;   --pcts-bg:#ffedd5;   /* Pcts/personas: naranja */
  --vcc:#6d28d9;    --vcc-bg:#ede9fe;    /* Vib cuerpo completo: índigo/violeta */
  --vhb:#0891b2;    --vhb-bg:#cffafe;    /* Vib mano-brazo: cian */
}

/* ===== NAVBAR ===== */
.ist-navbar{ background: var(--primary-dk); }
.ist-navbar .navbar-brand{ display:inline-flex; align-items:center; gap:.5rem; padding:.25rem 0; }
.ist-navbar .navbar-brand img{ height:36px; display:block; }
.ist-navbar .nav-link{ color:#fff; }
.ist-navbar .nav-link:hover{ color:#f2e9ff; }

.small, .text-muted{ color:var(--muted) !important; }

/* ===== FICHAS (targets) ===== */
.card-ficha{
  border-left:5px solid var(--primary);
  transition: transform .12s ease, box-shadow .12s ease;
  cursor:pointer;
  overflow:hidden;
  background:#fff;
  border-radius:.75rem;
}
.card-ficha .title{ color:var(--primary); margin:0; }
.card-ficha:hover{ transform: translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.12); }
.chip{
  display:inline-block; font-size:.8rem; background:var(--chip-bg);
  color:var(--primary); border:1px solid var(--chip-br);
  border-radius:16px; padding:.25rem .55rem; margin-right:.25rem;
}

/* Grids responsivos */
.cards-wrap,
.factors-wrap{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
  gap:.6rem .7rem;
  align-items:start;
  width:100%;
  box-sizing:border-box;
}
@media (max-width: 420px){
  .cards-wrap, .factors-wrap{
    grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  }
}

/* ===== Badges y pills ===== */
.status-pill{
  display:inline-flex; align-items:center; gap:.45rem;
  padding:.35rem .7rem; border-radius:999px; font-weight:700; font-size:.85rem;
  border:1px solid transparent;
}
.status-ok   { background:rgba(22,163,74,.12);  color:var(--ok);   border-color:rgba(22,163,74,.25); }
.status-warn { background:rgba(245,158,11,.12); color:var(--warn); border-color:rgba(245,158,11,.25); }
.status-bad  { background:rgba(220,38,38,.12);  color:var(--risk); border-color:rgba(220,38,38,.25); }
.status-unk  { background:#f3f4f6; color:#374151; border-color:#e5e7eb; }

.pill{
  display:inline-flex; align-items:center; gap:.4rem;
  background:#f9fafb; color:#374151; border:1px solid #e5e7eb;
  padding:.28rem .55rem; border-radius:999px; font-weight:600; font-size:.8rem;
}

/* ===== FACTORES (chips) ===== */
.factor-chip{
  display:inline-flex; align-items:center; gap:.4rem;
  border:1px solid transparent; border-radius:.6rem;
  padding:.35rem .55rem; font-weight:700; line-height:1.2;
  white-space:normal; word-break:break-word; hyphens:auto;
  box-sizing:border-box; font-size:.82rem;
}
.factor-chip .state{
  display:inline-flex; align-items:center; justify-content:center;
  width:1.2rem; height:1.2rem; border-radius:999px;
  background:#e5e7eb; color:#111827; font-size:.72rem; font-weight:800;
}

/* Colores por factor (más vivos) */
.f-rep.is-yes  { background:var(--rep-bg);  color:var(--rep);  border-color:rgba(220,38,38,.35); }
.f-rep.is-no   { background:#fff;          color:#991b1b;      border-color:#fecaca; }
.f-post.is-yes { background:var(--post-bg);color:var(--post); border-color:#bfdbfe; }
.f-post.is-no  { background:#fff;          color:#1e40af;      border-color:#c7d2fe; }
.f-lev.is-yes  { background:var(--lev-bg); color:var(--lev);  border-color:#a7f3d0; }
.f-lev.is-no   { background:#fff;          color:#065f46;      border-color:#99f6e4; }
.f-push.is-yes { background:var(--push-bg);color:var(--push); border-color:#ddd6fe; }
.f-push.is-no  { background:#fff;          color:#5b21b6;      border-color:#e9d5ff; }
.f-pcts.is-yes { background:var(--pcts-bg);color:var(--pcts); border-color:#fed7aa; }
.f-pcts.is-no  { background:#fff;          color:#9a3412;      border-color:#fed7aa; }
.f-vcc.is-yes  { background:var(--vcc-bg); color:var(--vcc);  border-color:#ddd6fe; }
.f-vcc.is-no   { background:#fff;          color:#4c1d95;      border-color:#c4b5fd; }
.f-vhb.is-yes  { background:var(--vhb-bg); color:var(--vhb);  border-color:#a5f3fc; }
.f-vhb.is-no   { background:#fff;          color:#0e7490;      border-color:#bae6fd; }

/* ===== “Highlight” por severidad (modal) ===== */
.hl-ok   { background: linear-gradient(0deg, rgba(22,163,74,.08), rgba(22,163,74,.08)); border:1px solid rgba(22,163,74,.25); border-radius:.75rem; }
.hl-warn { background: linear-gradient(0deg, rgba(245,158,11,.10), rgba(245,158,11,.10)); border:1px solid rgba(245,158,11,.25); border-radius:.75rem; }
.hl-risk { background: linear-gradient(0deg, rgba(220,38,38,.10), rgba(220,38,38,.10)); border:1px solid rgba(220,38,38,.28); border-radius:.75rem; }

.state-card{ padding:.75rem .9rem; }
.state-card .sc-head{ font-weight:800; color:#111; margin-bottom:.25rem; display:flex; align-items:center; gap:.4rem; }
.state-card .sc-body{ color:#1f2937; }

/* ===== Tabla-like en modal ===== */
.table-like table{
  width:100%; border-collapse:separate; border-spacing:0; overflow:hidden;
  border:1px solid #e5e7eb; border-radius:.75rem; background:#fff;
}
.table-like thead th{
  background:#f3f4ff; color:#312e81; font-weight:800; padding:.6rem .75rem; border-bottom:1px solid #e5e7eb;
}
.table-like tbody th{
  background:#fafbff; font-weight:700; color:#374151; width:36%; padding:.55rem .75rem; border-bottom:1px dashed #eef2f7;
}
.table-like tbody td{
  padding:.55rem .75rem; color:#374151; border-bottom:1px dashed #eef2f7;
}
.table-like tbody tr:last-child th,
.table-like tbody tr:last-child td{ border-bottom:0; }

/* ===== Panel derecho: Cuestionarios por área ===== */
.areas-list .area-block{
  border:1px solid #eee; border-radius:.9rem; padding:.85rem; background:#fff; margin-bottom:.85rem;
}
.areas-list .area-head{
  display:flex; justify-content:space-between; align-items:center; gap:.5rem; flex-wrap:wrap;
}
.areas-list .puesto-btn{
  width:100%; text-align:left; background:#faf9ff; border:1px solid #eee; border-radius:.6rem; padding:.6rem .75rem;
  display:flex; justify-content:space-between; align-items:center; gap:.5rem;
}
.areas-list .puesto-btn:hover{ background:#f3f1ff; }

/* Utilidades pequeñas */
.m-dot{ width:.6rem; height:.6rem; border-radius:50%; display:inline-block; }
.m-ok   { background:var(--ok); }
.m-warn { background:var(--warn); }
.m-risk { background:var(--risk); }

@media (max-width: 575.98px){
  .card-ficha .title{ font-size:1.05rem; }
  .chip{ font-size:.78rem; }
}
